{"version":3,"sources":["js/module/component.js","js/components/GameList.js","js/module/storage.js","js/game-list.js"],"names":["Component","state","actions","Object","defineProperty","enumerable","name","callback","push","value","isRender","self","forEach","render","getGameListTemplate","id","digitNumber","status","GameList","el","innerHTML","map","game","join","localStorage","window","storage","save","gameInfo","games","JSON","parse","getItem","removeItem","setItem","stringify","load","done","delete","getAll","getNextGameId","keys","length","main","gameList","document","querySelector","addAction","context","addEventListener","e","target","closest","dataset","dispatch","filter","values"],"mappings":";;AGAA;;AACA;;AAEA,ADHA,IAAMwB,KCGGmB,IAAT,GAAgB,ADHE,GAAGlB,MAAM,CAACD,YAA5B;ADAA,AEIE,ADFK,IAAME,ECELkB,KDFY,GCEJ,ADFO,GCEJ,IAAI1B,kBAAJ,CAAa;AAAEC,ADDhCQ,EAAAA,ECCgCR,EAAE,ADD9B,ECCgC0B,ADD9B,QCCsC,CAACC,KDDtC/B,EAAD,EAAKa,ICCyB,CAAuB,GDDrD,EAAkB,CCCY,CAAN;AAAsC3B,ADAlE,ICAkEA,IDA5D4B,CCAiE,EAAE,EDA9D,GAAGC,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAX,KAA6C,EAA3D;ACA4B,ADE5BH,GCFe,CAAjB,ADEEA,KAAK,CAACd,EAAD,CAAL,GAAYa,QAAZ;ACAFgB,ADEEpB,ECFFoB,EDEEpB,MCFM,CACLuB,KDCW,CAACd,GCFf,CACa,MADb,ADEE,CAAwB,CCDL,MDCnB,ICDoBe,OAAD,EAAUvC,KAAV,EAAoB;AACrCuC,ADCFxB,ICDEwB,ADCFxB,OCDS,CAACvB,IDCE,CCDV,ADCWiC,GCDKzB,IDClB,CCDE,ADCmB,OAArB,EAA8BqB,IAAI,CAACK,SAAL,CAAeN,KAAf,CAA9B;ACAEmB,ADCH,GARoB,CCOjBA,AHTAhD,OGSO,CAACmB,EAAR,CAAW8B,gBAAX,CAA4B,OAA5B,EAAqC,UAACC,CAAD,EAAO;AAC1C,AHTN,AEUAd,EAAAA,IAAI,EAAE,ECDMe,MAAM,GAAGD,CAAC,CAACC,CDChBpC,EAAD,EAAQ,CCDR,AHTiB;AAAA,AEWrB,QFXYd,AEWN4B,KFXe,AEWV,GAAGC,IAAI,CFXN7B,AEWO8B,KFXE,AEWP,CAAWP,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAX,KAA6C,EAA3D;ACAI,ADEJ,UCFQmB,CDEDtB,KCFO,ADEF,CCFGuB,ADEFrC,EAAD,CAAZ,ICFQ,CAAe,kBAAf,CAAJ,EAAwC;AACtC,AHZe,AEctB,GAboB,SCWPA,EAAE,GAAGoC,MAAM,CAACE,OAAP,CAAetC,EAA1B;AAEAiC,ADCRX,EAAAA,IAAI,ECDIW,ADCF,OCDS,CAACM,MDCTvC,ECDC,ADCF,CCDmB,CDCX,OCDN,EAA2BA,EAA3B;AACD,AHdL,AEeA,QAAMc,CFfD5B,IEeM,CFfX,EEec6B,CFfD7B,GEeK,CAAC8B,CFfnB,IEec,CAAWP,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAX,KAA6C,EAA3D;ACAG,AHdH,AEgBAR,IAAAA,CCVE,IHNGtB,OAAL,AEgBY,CAAC+B,EFhBE,EAAf,MEgBA,CAAwB,OAAxB;ACDC,AHbD9B,AEgBA0B,GCfF,CHDE1B,AEgBA0B,CCFCkB,IDEI,CFhBC,AEgBAhC,CFhBCX,CEgBF,CAAL,CCfF,ADeYa,CCFC,KDEX,GCfF,ADeqB,ECFE,AHdrB,CAAsB,GEgBtB,CFhBA,EAA4B,GGcN+B,IHdtB,EAAqC,CGchB,EAAUjC,EAAV,EAAiB;AACpCiC,AHdA3C,AEiBFmB,ICHEwB,ADGFxB,EFjBEnB,KGcO,CAACJ,IHdE,AEiBA,CCHV,ADGWiC,CFjBC,EGcIc,IDGlB,CAAqB,ECHI,CAAC/C,IDG1B,CCHkB,CAAcsD,ADGFzB,IAAI,CAACK,CCHjB,CAAqB,ODGT,CAAeN,ECHLP,GDGV,CCHS,ADGvC;ACHuC,AHfF,AEmBtC,GAtBoB,EFGnB,QGeiDA,IAAI,CAACP,EAAL,KAAYA,EAAtB;AAAA,AHZxC,AEiBDuB,EAAAA,GCLoB,CAAhB,EDKE,EAAE,iBAACvB,EAAD,EAAQ;AACd,QAAMc,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAX,KAA6C,EAA3D;ACLEN,ADOFF,IAAAA,YAAY,CAACS,ICPHK,MAAR,ADOF,CCPiBvB,ADOO,ECPtB,KDOF;ACNC,ADQD,GCxBF,QDwBSc,KAAK,CAACd,EAAD,CAAZ;ACNF6B,ADQEpB,ECRFoB,EDQEpB,MCRM,CAAC8B,KDQK,CAACpB,ECRf,CAAkB,IDQhB,CAAqB,CCRvB,EAA0B/B,CHdjB,CAAE,EEsBT,ECR8B,ADQA2B,CCRC0B,GDQG,CAACrB,ECRX,CAAcT,MDQR,CAAeG,KAAf,CAA9B,ICR8CU,MAAR,EAAd,CAA1B;AACD,ADQE,GA/BoB;AAgCrBA,EAAAA,MAAM,EAAE,kBAAM;ACPhBd,ADQI,MCRE,CAACwB,IDQInB,IAAI,CAACC,KAAL,CAAWP,CCRtB,CAAwB,MHfZlB,IEuBsB,CAAC0B,CFvBjBzB,MGelB,ADQsB,CAAqB,CCRCoC,EHfhB,EGe5B,EDQsB,CAAX,KAA6C,EAApD;AFtBA,AEuBD,GAlCoB,OFWf,CAAC,KAAKzC,OAAL,CAAaI,IAAb,CAAL,EAAyB;ACX7B,ADYM,AEuBJkC,EAAAA,ODnCO1B,IDYEZ,EEuBI,EAAE,GFvBX,CAAaI,IAAb,GCZN,CDY2B,EAArB,ICZoD,OCmCnC;ADnCmC,ADarD,AEuBD,MDpC2BS,EAA2B,GCoC/CZ,KDpCoBY,CCoCd,CDpCyC,ACoCxC0B,IAAP,CAAYX,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAX,KAA6C,EAAzD,EAA6DU,MAA7D,GAAsE,CAA7E;ADpCsD,ACqCvD,MDrCgC1B,WAAuB,QAAvBA,WAAuB;AAAA,ADetD,AEfmB,CAAhB,KDAyCC,KDevCf,CCfiD,MDetD,CAAaI,CCf+BW,GDe5C,EAAmBT,CCfmC,GDetD,CAAwBD,QAAxB;ACdF,ADeE,aAAO,IAAP,gGCZeQ,EAHjB,oDAIgBC,WAJhB,gEAKmBD,EALnB,uEAOkCA,EAPlC,oBAO8CC,WAP9C,0DAQEC,MAAM,KAAK,MAAX,IAAqB,UARvB,2HAUwEF,EAVxE;AAgBD,ADAE;;ICEUG;6BDAFZ,MAAMG,OAAwB;AAAA,UAAjBC,QAAiB,uEAAN,IAAM;;AACrC,UAAI,CAAC,KAAKR,OAAL,CAAaI,IAAb,CAAL,EAAyB;ACA3B,ADCI,2BCDuB;AAAA,ADExB;;ACFwB,ADIzB,QCJYa,EAAa,ADInBR,IAAI,GAAG,ECJDQ,EAAa,ADIzB;ACJyB,ADMzB,QCNgBlB,GDMXC,ECNoB,KDMzB,CAAaI,GCNGL,CDMhB,EAAmBW,ECNM,KDMzB,CAA2B,UAACL,QAAD,EAAc;AACvCA,QAAAA,QAAQ,CAACI,IAAD,EAAOF,KAAP,CAAR;ACPuB,ADQvBC,QAAAA,QAAQ,IAAIC,IAAI,CAACE,MAAL,CAAYF,IAAI,CAACV,KAAjB,CAAZ;AACD,OAHD;ACLA,ADSA,aAAO,IAAP,aCTM;AAAEA,ADUT,MCVSA,KAAK,EAALA;AAAF,KAAN;AAEA,UAAKkB,EAAL,GAAUA,EAAV;AAHyB;AAI1B;;eDUYnB;;2BCRNC,OAAO;AACZ,WAAKkB,EAAL,CAAQC,SAAR,GAAoBnB,KAAK,CAACoB,GAAN,CAAU,UAACC,IAAD;AAAA,eAAUR,mBAAmB,CAACQ,IAAD,CAA7B;AAAA,OAAV,EAA+CC,IAA/C,CAAoD,EAApD,CAApB;AACD;;;;EAT2BvB","file":"game-list.e22baaaf.js","sourceRoot":"../src","sourcesContent":["class Component {\n  constructor({ state }) {\n    this.state = state;\n    this.actions = {};\n\n    Object.defineProperty(this, 'state', {\n      enumerable: false,\n    });\n  }\n\n  render() {}\n\n  addAction(name, callback) {\n    if (!this.actions[name]) {\n      this.actions[name] = [];\n    }\n\n    this.actions[name].push(callback);\n    return this;\n  }\n\n  dispatch(name, value, isRender = true) {\n    if (!this.actions[name]) {\n      return;\n    }\n\n    const self = this;\n\n    this.actions[name].forEach((callback) => {\n      callback(self, value);\n      isRender && self.render(self.state);\n    });\n    return this;\n  }\n}\n\nexport default Component;\n","import Component from '../module/component';\n\nfunction getGameListTemplate({ id, digitNumber, status }) {\n  return `\n    <div class=\"col-sm-4 col-md-3\">\n        <div class=\"thumbnail\">\n        <div id=\"${id}\" class=\"caption\">\n            <h3>${digitNumber}자리 게임</h3>\n            <p>id: ${id}</p>\n            <p>\n            <a href=\"game.html?id=${id}&digit=${digitNumber}\" class=\"btn btn-primary btn-continue-game ${\n    status === 'done' && 'disabled'\n  }\">이어하기</a>\n            <a href=\"#\" class=\"btn btn-danger btn-delete-game\" data-id=\"${id}\">삭제하기</a>\n            </p>\n        </div>\n        </div>\n    </div>\n    `;\n}\n\nexport class GameList extends Component {\n  constructor({ el, state }) {\n    super({ state });\n\n    this.el = el;\n  }\n\n  render(state) {\n    this.el.innerHTML = state.map((game) => getGameListTemplate(game)).join('');\n  }\n}\n","const localStorage = window.localStorage;\n\nexport const storage = {\n  save: (id, gameInfo) => {\n    const games = JSON.parse(localStorage.getItem('games')) || {};\n\n    games[id] = gameInfo;\n\n    localStorage.removeItem('games');\n    localStorage.setItem('games', JSON.stringify(games));\n  },\n  load: (id) => {\n    const games = JSON.parse(localStorage.getItem('games')) || {};\n\n    return games[id];\n  },\n  done: (id) => {\n    const games = JSON.parse(localStorage.getItem('games')) || {};\n\n    localStorage.removeItem('games');\n\n    games[id].status = 'done';\n\n    localStorage.setItem('games', JSON.stringify(games));\n  },\n  delete: (id) => {\n    const games = JSON.parse(localStorage.getItem('games')) || {};\n\n    localStorage.removeItem('games');\n\n    delete games[id];\n\n    localStorage.setItem('games', JSON.stringify(games));\n  },\n  getAll: () => {\n    return JSON.parse(localStorage.getItem('games')) || {};\n  },\n  getNextGameId: () => {\n    return Object.keys(JSON.parse(localStorage.getItem('games')) || {}).length + 1;\n  },\n};\n","import { GameList } from './components/GameList';\nimport { storage } from './module/storage';\n\nfunction main() {\n  const gameList = new GameList({ el: document.querySelector('.row'), state: [] });\n\n  gameList\n    .addAction('init', (context, value) => {\n      context.state = value;\n      context.el.addEventListener('click', (e) => {\n        const target = e.target;\n\n        if (target.closest('.btn-delete-game')) {\n          const id = target.dataset.id;\n\n          context.dispatch('remove', id);\n        }\n      });\n    })\n    .addAction('remove', (context, id) => {\n      context.state = context.state.filter((game) => game.id !== id);\n      storage.delete(id);\n    });\n\n  gameList.dispatch('init', Object.values(storage.getAll()));\n}\n\nwindow.addEventListener('DOMContentLoaded', main);\n"]}